(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27536],{91224:function(t,e,n){"use strict";var i=n(235);e.Z=void 0;var b=i(n(67765)),w=n(18813);e.Z=(0,b.default)((0,w.jsx)("path",{d:"M20.97 7.27c.39-.39.39-1.02 0-1.41l-2.83-2.83a.9959.9959 0 0 0-1.41 0l-4.49 4.49-3.89-3.89c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l3.89 3.89L3 16.76V21h4.24l4.52-4.52 3.89 3.89c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83l-3.89-3.89zM5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.2 1.2-1.9 1.9zm11.23 7.44-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27-1.9 1.9-3.89-3.89 1.9-1.9zM6.41 19H5v-1.41l9.61-9.61 1.3 1.3.11.11zm9.61-12.44 1.41-1.41 1.41 1.41-1.41 1.41z"}),"DesignServicesOutlined")},45058:function(t,e,n){"use strict";var i=n(235);e.Z=void 0;var b=i(n(67765)),w=n(18813);e.Z=(0,b.default)((0,w.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},54920:function(t,e,n){"use strict";var i=n(235);e.Z=void 0;var b=i(n(67765)),w=n(18813);e.Z=(0,b.default)((0,w.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOpenOutlined")},66725:function(t,e,n){"use strict";var i=n(235);e.Z=void 0;var b=i(n(67765)),w=n(18813);e.Z=(0,b.default)((0,w.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined")},39869:function(t,e,n){"use strict";var i=n(235);e.Z=void 0;var b=i(n(67765)),w=n(18813);e.Z=(0,b.default)((0,w.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt")},8562:function(t,e,n){"use strict";var i=n(73797),b=n(18813);e.Z=(0,i.Z)((0,b.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call")},58800:function(t,e,n){"use strict";n.d(e,{Oq:function(){return calculateBox},dO:function(){return createBox},jn:function(){return expand},iz:function(){return getBox},Dz:function(){return getRect},cv:function(){return offset},oc:function(){return withScroll}});var tiny_invariant_esm=function(t,e){if(!t)throw Error("Invariant failed")},getRect=function(t){var e=t.top,n=t.right,i=t.bottom,b=t.left;return{top:e,right:n,bottom:i,left:b,width:n-b,height:i-e,x:b,y:e,center:{x:(n+b)/2,y:(i+e)/2}}},expand=function(t,e){return{top:t.top-e.top,left:t.left-e.left,bottom:t.bottom+e.bottom,right:t.right+e.right}},shrink=function(t,e){return{top:t.top+e.top,left:t.left+e.left,bottom:t.bottom-e.bottom,right:t.right-e.right}},i={top:0,right:0,bottom:0,left:0},createBox=function(t){var e=t.borderBox,n=t.margin,b=void 0===n?i:n,w=t.border,x=void 0===w?i:w,j=t.padding,M=void 0===j?i:j,O=getRect(expand(e,b)),I=getRect(shrink(e,x)),S=getRect(shrink(I,M));return{marginBox:O,borderBox:getRect(e),paddingBox:I,contentBox:S,margin:b,border:x,padding:M}},parse=function(t){var e=t.slice(0,-2);if("px"!==t.slice(-2))return 0;var n=Number(e);return isNaN(n)&&tiny_invariant_esm(!1),n},offset=function(t,e){var n=t.borderBox,i=t.border,b=t.margin,w=t.padding;return createBox({borderBox:{top:n.top+e.y,left:n.left+e.x,bottom:n.bottom+e.y,right:n.right+e.x},border:i,margin:b,padding:w})},withScroll=function(t,e){return void 0===e&&(e={x:window.pageXOffset,y:window.pageYOffset}),offset(t,e)},calculateBox=function(t,e){return createBox({borderBox:t,margin:{top:parse(e.marginTop),right:parse(e.marginRight),bottom:parse(e.marginBottom),left:parse(e.marginLeft)},padding:{top:parse(e.paddingTop),right:parse(e.paddingRight),bottom:parse(e.paddingBottom),left:parse(e.paddingLeft)},border:{top:parse(e.borderTopWidth),right:parse(e.borderRightWidth),bottom:parse(e.borderBottomWidth),left:parse(e.borderLeftWidth)}})},getBox=function(t){return calculateBox(t.getBoundingClientRect(),window.getComputedStyle(t))}},26806:function(t){function arrayEach(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}t.exports=arrayEach},12717:function(t,e,n){var i=n(38835),b=n(18469);function baseAssign(t,e){return t&&i(e,b(e),t)}t.exports=baseAssign},80076:function(t,e,n){var i=n(38835),b=n(84107);function baseAssignIn(t,e){return t&&i(e,b(e),t)}t.exports=baseAssignIn},79387:function(t,e,n){var i=n(15917),b=n(26806),w=n(56840),x=n(12717),j=n(80076),M=n(44752),O=n(99544),I=n(68876),S=n(2428),C=n(81993),k=n(62385),P=n(34741),R=n(79577),A=n(80068),D=n(32277),E=n(51707),B=n(67611),L=n(12713),U=n(50136),T=n(63133),z=n(18469),F=n(84107),V="[object Arguments]",_="[object Function]",Z="[object Object]",H={};function baseClone(t,e,n,N,Y,q){var W,X=1&e,$=2&e,K=4&e;if(n&&(W=Y?n(t,N,Y,q):n(t)),void 0!==W)return W;if(!U(t))return t;var G=E(t);if(G){if(W=R(t),!X)return O(t,W)}else{var J=P(t),Q=J==_||"[object GeneratorFunction]"==J;if(B(t))return M(t,X);if(J==Z||J==V||Q&&!Y){if(W=$||Q?{}:D(t),!X)return $?S(t,j(W,t)):I(t,x(W,t))}else{if(!H[J])return Y?t:{};W=A(t,J,X)}}q||(q=new i);var tt=q.get(t);if(tt)return tt;q.set(t,W),T(t)?t.forEach(function(i){W.add(baseClone(i,e,n,i,t,q))}):L(t)&&t.forEach(function(i,b){W.set(b,baseClone(i,e,n,b,t,q))});var te=K?$?k:C:$?F:z,tn=G?void 0:te(t);return b(tn||t,function(i,b){tn&&(i=t[b=i]),w(W,b,baseClone(i,e,n,b,t,q))}),W}H[V]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object DataView]"]=H["[object Boolean]"]=H["[object Date]"]=H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Map]"]=H["[object Number]"]=H[Z]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object Symbol]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H["[object Error]"]=H[_]=H["[object WeakMap]"]=!1,t.exports=baseClone},13920:function(t,e,n){var i=n(34741),b=n(41375);function baseIsMap(t){return b(t)&&"[object Map]"==i(t)}t.exports=baseIsMap},93793:function(t,e,n){var i=n(34741),b=n(41375);function baseIsSet(t){return b(t)&&"[object Set]"==i(t)}t.exports=baseIsSet},63007:function(t,e,n){var i=n(95175),b=n(34133);function basePick(t,e){return i(t,e,function(e,n){return b(t,n)})}t.exports=basePick},95175:function(t,e,n){var i=n(97883),b=n(27561),w=n(38234);function basePickBy(t,e,n){for(var x=-1,j=e.length,M={};++x<j;){var O=e[x],I=i(t,O);n(I,O)&&b(M,w(O,t),I)}return M}t.exports=basePickBy},27561:function(t,e,n){var i=n(56840),b=n(38234),w=n(16102),x=n(50136),j=n(31875);function baseSet(t,e,n,M){if(!x(t))return t;e=b(e,t);for(var O=-1,I=e.length,S=I-1,C=t;null!=C&&++O<I;){var k=j(e[O]),P=n;if("__proto__"===k||"constructor"===k||"prototype"===k)break;if(O!=S){var R=C[k];void 0===(P=M?M(R,k,C):void 0)&&(P=x(R)?R:w(e[O+1])?[]:{})}i(C,k,P),C=C[k]}return t}t.exports=baseSet},59530:function(t,e,n){var i=n(53958);function cloneDataView(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}t.exports=cloneDataView},18841:function(t){var e=/\w*$/;function cloneRegExp(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}t.exports=cloneRegExp},68170:function(t,e,n){var i=n(93797),b=i?i.prototype:void 0,w=b?b.valueOf:void 0;function cloneSymbol(t){return w?Object(w.call(t)):{}}t.exports=cloneSymbol},68876:function(t,e,n){var i=n(38835),b=n(54024);function copySymbols(t,e){return i(t,b(t),e)}t.exports=copySymbols},2428:function(t,e,n){var i=n(38835),b=n(67544);function copySymbolsIn(t,e){return i(t,b(t),e)}t.exports=copySymbolsIn},39480:function(t,e,n){var i=n(23289),b=n(18525),w=n(48834);function flatRest(t){return w(b(t,void 0,i),t+"")}t.exports=flatRest},62385:function(t,e,n){var i=n(72564),b=n(67544),w=n(84107);function getAllKeysIn(t){return i(t,w,b)}t.exports=getAllKeysIn},67544:function(t,e,n){var i=n(24559),b=n(4871),w=n(54024),x=n(83072),j=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,w(t)),t=b(t);return e}:x;t.exports=j},79577:function(t){var e=Object.prototype.hasOwnProperty;function initCloneArray(t){var n=t.length,i=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(i.index=t.index,i.input=t.input),i}t.exports=initCloneArray},80068:function(t,e,n){var i=n(53958),b=n(59530),w=n(18841),x=n(68170),j=n(50805);function initCloneByTag(t,e,n){var M=t.constructor;switch(e){case"[object ArrayBuffer]":return i(t);case"[object Boolean]":case"[object Date]":return new M(+t);case"[object DataView]":return b(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return j(t,n);case"[object Map]":case"[object Set]":return new M;case"[object Number]":case"[object String]":return new M(t);case"[object RegExp]":return w(t);case"[object Symbol]":return x(t)}}t.exports=initCloneByTag},81800:function(t,e,n){var i=n(79387);function clone(t){return i(t,4)}t.exports=clone},12713:function(t,e,n){var i=n(13920),b=n(12034),w=n(31255),x=w&&w.isMap,j=x?b(x):i;t.exports=j},63133:function(t,e,n){var i=n(93793),b=n(12034),w=n(31255),x=w&&w.isSet,j=x?b(x):i;t.exports=j},99073:function(t,e,n){var i=n(63007),b=n(39480)(function(t,e){return null==t?{}:i(t,e)});t.exports=b},45551:function(t,e,n){"use strict";function areInputsEqual(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function memoizeOne(t,e){void 0===e&&(e=areInputsEqual);var n,i,b=[],w=!1;return function(){for(var x=[],j=0;j<arguments.length;j++)x[j]=arguments[j];return w&&n===this&&e(x,b)||(i=t.apply(this,x),w=!0,n=this,b=x),i}}n.r(e),e.default=memoizeOne},15034:function(t,e){"use strict";e.Z=function(t){var e=[],n=null,wrapperFn=function(){for(var i=arguments.length,b=Array(i),w=0;w<i;w++)b[w]=arguments[w];e=b,n||(n=requestAnimationFrame(function(){n=null,t.apply(void 0,e)}))};return wrapperFn.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},wrapperFn}},71504:function(t,e,n){t.exports=function(t,e){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=o(t),i=o(e);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function a(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(null==t)return{};var n,i=function(t,e){if(null==t)return{};for(var n,i={},b=Object.keys(t),w=0;w<b.length;w++)n=b[w],0<=e.indexOf(n)||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols)for(var b=Object.getOwnPropertySymbols(t),w=0;w<b.length;w++)n=b[w],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n]);return i}function d(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i,b=h(t);return i=e?(n=h(this).constructor,Reflect.construct(b,arguments,n)):b.apply(this,arguments),i&&("object"==typeof i||"function"==typeof i)?i:d(this)}}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,b=!1,w=void 0;try{for(var x,j=t[Symbol.iterator]();!(i=(x=j.next()).done)&&(n.push(x.value),!e||n.length!==e);i=!0);}catch(t){b=!0,w=t}finally{try{i||null==j.return||j.return()}finally{if(b)throw w}}return n}}(t,e)||g(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function v(t,e){return new Promise(function(n,i){var b=new Image;b.onload=function(){return n(b)},b.onerror=i,!1==(null!==t&&!!t.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&e&&(b.crossOrigin=e),b.src=t})}var b,w=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),x="undefined"!=typeof File,j={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},M=w?j.touch:j.desktop,O="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,I={x:.5,y:.5},S=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(a,i.default.Component);var t,e,n,b=p(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),s(d(e=b.call(this,t)),"state",{drag:!1,my:null,mx:null,image:I}),s(d(e),"handleImageReady",function(t){var n=e.getInitialSize(t.width,t.height);n.resource=t,n.x=.5,n.y=.5,n.backgroundColor=e.props.backgroundColor,e.setState({drag:!1,image:n},e.props.onImageReady),e.props.onLoadSuccess(n)}),s(d(e),"clearImage",function(){e.canvas.getContext("2d").clearRect(0,0,e.canvas.width,e.canvas.height),e.setState({image:I})}),s(d(e),"handleMouseDown",function(t){(t=t||window.event).preventDefault(),e.setState({drag:!0,mx:null,my:null})}),s(d(e),"handleMouseUp",function(){e.state.drag&&(e.setState({drag:!1}),e.props.onMouseUp())}),s(d(e),"handleMouseMove",function(t){var n,i,b,w,x,j,M,O,I,S,C,k,P,R,A,D;t=t||window.event,!1!==e.state.drag&&(t.preventDefault(),b={mx:n=t.targetTouches?t.targetTouches[0].pageX:t.clientX,my:i=t.targetTouches?t.targetTouches[0].pageY:t.clientY},D=(D=e.props.rotate%360)<0?D+360:D,e.state.mx&&e.state.my&&(w=e.state.mx-n,x=e.state.my-i,j=e.state.image.width*e.props.scale,M=e.state.image.height*e.props.scale,I=(O=e.getCroppingRect()).x,S=O.y,I*=j,S*=M,k=Math.cos((C=function(t){return t*(Math.PI/180)})(D)),R=S+-w*(P=Math.sin(C(D)))+x*k,A={x:(I+w*k+x*P)/j+1/e.props.scale*e.getXScale()/2,y:R/M+1/e.props.scale*e.getYScale()/2},e.props.onPositionChange(A),b.image=y(y({},e.state.image),A)),e.setState(b),e.props.onMouseMove(t))}),s(d(e),"setCanvas",function(t){e.canvas=t}),e.canvas=null,e}return t=a,e=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(O=1);var t,e,n=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(n),document&&(t=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){t=!1}return t}()&&{passive:!1},e=M.native,document.addEventListener(e.move,this.handleMouseMove,t),document.addEventListener(e.up,this.handleMouseUp,t),w&&(document.addEventListener(e.mouseMove,this.handleMouseMove,t),document.addEventListener(e.mouseUp,this.handleMouseUp,t)))}},{key:"componentDidUpdate",value:function(t,e){this.props.image&&this.props.image!==t.image||this.props.width!==t.width||this.props.height!==t.height||this.props.backgroundColor!==t.backgroundColor?this.loadImage(this.props.image):this.props.image||e.image===I||this.clearImage();var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(n),this.paintImage(n,this.state.image,this.props.border),t.image===this.props.image&&t.width===this.props.width&&t.height===this.props.height&&t.position===this.props.position&&t.scale===this.props.scale&&t.rotate===this.props.rotate&&e.my===this.state.my&&e.mx===this.state.mx&&e.image.x===this.state.image.x&&e.image.y===this.state.image.y&&e.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var t;document&&(t=M.native,document.removeEventListener(t.move,this.handleMouseMove,!1),document.removeEventListener(t.up,this.handleMouseUp,!1),w&&(document.removeEventListener(t.mouseMove,this.handleMouseMove,!1),document.removeEventListener(t.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.props.border;return Array.isArray(e)?e:[e,e]}},{key:"getDimensions",value:function(){var t=this.props,e=t.width,n=t.height,i=t.rotate,b=t.border,w={},x=m(this.getBorders(b),2),j=x[0],M=x[1];return this.isVertical()?(w.width=n,w.height=e):(w.width=e,w.height=n),w.width+=2*j,w.height+=2*M,{canvas:w,rotate:i,width:e,height:n,border:b}}},{key:"getImage",value:function(){var t=this.getCroppingRect(),e=this.state.image;t.x*=e.resource.width,t.y*=e.resource.height,t.width*=e.resource.width,t.height*=e.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=t.height,n.height=t.width):(n.width=t.width,n.height=t.height);var i=n.getContext("2d");return i.translate(n.width/2,n.height/2),i.rotate(this.props.rotate*Math.PI/180),i.translate(-n.width/2,-n.height/2),this.isVertical()&&i.translate((n.width-n.height)/2,(n.height-n.width)/2),e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(-t.x,-t.y,e.resource.width,e.resource.height)),i.drawImage(e.resource,-t.x,-t.y),n}},{key:"getImageScaledToCanvas",value:function(){var t=this.getDimensions(),e=t.width,n=t.height,i=document.createElement("canvas");return this.isVertical()?(i.width=n,i.height=e):(i.width=e,i.height=n),this.paintImage(i.getContext("2d"),this.state.image,0,1),i}},{key:"getXScale",value:function(){return Math.min(1,this.props.width/this.props.height/(this.state.image.width/this.state.image.height))}},{key:"getYScale",value:function(){return Math.min(1,this.props.height/this.props.width/(this.state.image.height/this.state.image.width))}},{key:"getCroppingRect",value:function(){var t=this.props.position||{x:this.state.image.x,y:this.state.image.y},e=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),i={x:t.x-e/2,y:t.y-n/2,width:e,height:n},b=0,w=1-i.width,x=0,j=1-i.height;return(this.props.disableBoundaryChecks||1<e||1<n)&&(b=-i.width,x=-i.height,j=w=1),y(y({},i),{},{x:Math.max(b,Math.min(i.x,w)),y:Math.max(x,Math.min(i.y,j))})}},{key:"loadImage",value:function(t){x&&t instanceof File?this.loadingImage=new Promise(function(e,n){var i=new FileReader;i.onload=function(t){try{var i=v(t.target.result);e(i)}catch(t){n(t)}},i.readAsDataURL(t)}).then(this.handleImageReady).catch(this.props.onLoadFailure):"string"==typeof t&&(this.loadingImage=v(t,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(t,e){var n,i,b=this.getDimensions();return e/t<b.height/b.width?i=t*((n=this.getDimensions().height)/e):n=e*((i=this.getDimensions().width)/t),{height:n,width:i}}},{key:"paintImage",value:function(t,e,n,i){var b,w=3<arguments.length&&void 0!==i?i:O;e.resource&&(b=this.calculatePosition(e,n),t.save(),t.translate(t.canvas.width/2,t.canvas.height/2),t.rotate(this.props.rotate*Math.PI/180),t.translate(-t.canvas.width/2,-t.canvas.height/2),this.isVertical()&&t.translate((t.canvas.width-t.canvas.height)/2,(t.canvas.height-t.canvas.width)/2),t.scale(w,w),t.globalCompositeOperation="destination-over",t.drawImage(e.resource,b.x,b.y,b.width,b.height),e.backgroundColor&&(t.fillStyle=e.backgroundColor,t.fillRect(b.x,b.y,b.width,b.height)),t.restore())}},{key:"calculatePosition",value:function(t,e){t=t||this.state.image;var n=m(this.getBorders(e),2),i=n[0],b=n[1],w=this.getCroppingRect(),x=t.width*this.props.scale,j=t.height*this.props.scale,M=-w.x*x,O=-w.y*j;return this.isVertical()?(M+=b,O+=i):(M+=i,O+=b),{x:M,y:O,height:j,width:x}}},{key:"paint",value:function(t){t.save(),t.scale(O,O),t.translate(0,0),t.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var e,n,i,b,w,x=this.props.borderRadius,j=this.getDimensions(),M=m(this.getBorders(j.border),2),I=M[0],S=M[1],C=j.canvas.height,k=j.canvas.width,x=Math.max(x,0);x=Math.min(x,k/2-I,C/2-S),t.beginPath(),e=k-2*I,n=C-2*S,0===(i=x)?t.rect(I,S,e,n):(b=e-i,w=n-i,t.translate(I,S),t.arc(i,i,i,Math.PI,1.5*Math.PI),t.lineTo(b,0),t.arc(b,i,i,1.5*Math.PI,2*Math.PI),t.lineTo(e,w),t.arc(b,w,i,2*Math.PI,.5*Math.PI),t.lineTo(i,n),t.arc(i,w,i,.5*Math.PI,Math.PI),t.translate(-I,-S)),t.rect(k,0,-k,C),t.fill("evenodd"),t.restore()}},{key:"render",value:function(){var t=this.props,e=(t.scale,t.rotate,t.image,t.border,t.borderRadius,t.width,t.height,t.position,t.color,t.backgroundColor,t.style),n=(t.crossOrigin,t.onLoadFailure,t.onLoadSuccess,t.onImageReady,t.onImageChange,t.onMouseUp,t.onMouseMove,t.onPositionChange,t.disableBoundaryChecks,t.disableHiDPIScaling,t.disableCanvasRotation,l(t,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),b=this.getDimensions(),x={width:b.canvas.width,height:b.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},j={width:b.canvas.width*O,height:b.canvas.height*O,style:y(y({},x),e)};return j[M.react.down]=this.handleMouseDown,w&&(j[M.react.mouseDown]=this.handleMouseDown),i.default.createElement("canvas",u({ref:this.setCanvas},j,n))}}],r(t.prototype,e),n&&r(t,n),a}();return s(S,"propTypes",{scale:n.default.number,rotate:n.default.number,image:n.default.oneOfType([n.default.string].concat(function(t){if(Array.isArray(t))return f(t)}(b=x?[n.default.instanceOf(File)]:[])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(b)||g(b)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:n.default.oneOfType([n.default.number,n.default.arrayOf(n.default.number)]),borderRadius:n.default.number,width:n.default.number,height:n.default.number,position:n.default.shape({x:n.default.number,y:n.default.number}),color:n.default.arrayOf(n.default.number),backgroundColor:n.default.string,crossOrigin:n.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:n.default.func,onLoadSuccess:n.default.func,onImageReady:n.default.func,onImageChange:n.default.func,onMouseUp:n.default.func,onMouseMove:n.default.func,onPositionChange:n.default.func,disableBoundaryChecks:n.default.bool,disableHiDPIScaling:n.default.bool,disableCanvasRotation:n.default.bool}),s(S,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),S}(n(81508),n(26407))},16961:function(t,e,n){"use strict";n.d(e,{I4:function(){return w},Ye:function(){return b}});var i=n(26407);function areInputsEqual(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function useMemoOne(t,e){var n=(0,i.useState)(function(){return{inputs:e,result:t()}})[0],b=(0,i.useRef)(n),w=e&&b.current.inputs&&areInputsEqual(e,b.current.inputs)?b.current:{inputs:e,result:t()};return(0,i.useEffect)(function(){b.current=w},[w]),w.result}function useCallbackOne(t,e){return useMemoOne(function(){return t},e)}var b=useMemoOne,w=useCallbackOne}}]);
//# sourceMappingURL=27536-472fa53ba5f6bf73.js.map